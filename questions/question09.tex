\section{Свойства интеграла Римана (достаточное условие интегрируемости композиции функций, интегрируемость на подотрезках и аддитивность интеграла Римана)}

\begin{theorem}[Достаточное условие интегрируемости композиции]
    Пусть $f \in R[a; b]$, а функция $\varphi$ ограничена и непрерывна на $f([a; b])$. Тогда $\varphi \circ f \in R[a; b]$.
\end{theorem}

\begin{proof}
    Здесь применим (пока не доказанный) критерий Лебега. Согласно нему, $f$ ограничена, а множество её точек разрыва имеет меру нуль по Лебегу.

    Из ограниченности $f$ и $\varphi$ следует ограниченность $\varphi \circ f$. Из непрерывности $\varphi$ на $f([a; b])$ следует, что в тех точках, где $f$ непрерывна, $\varphi \circ f$ тоже (теорема о непрерывности композиции функций). Следовательно, множество точек разрыва $\varphi \circ f$ тоже имеет меру нуль по Лебегу. Снова применяя критерий Лебега, получаем $\varphi \circ f \in R[a; b]$.
\end{proof}

\begin{example}
    Возьмём функции
    \[
        \varphi(x) = 
        \begin{cases}
            1,& x \ne 0,\\
            0,& x = 0,
        \end{cases}\quad
        f(x) = \operatorname{Riem}(x) =
        \begin{cases}
            \frac{1}{n},&\text{если $x = \frac{m}{n}$, $\frac{m}{n}$ --- несократимая дробь},\\
            0,&\text{если $x \notin \Q$}.
        \end{cases}
    \]

    Функия $f$ интегрируема по Риману на любом отрезке $[a; b]$, а $\varphi(x)$ ограничена на $\R$ и разрывна только при $x = 0$. Композиция $\varphi \circ f$ есть функция Дирихле, которая не интегрируема по Риману ни на каком отрезке $[a; b]$. Таким образом, последняя теорема может не выполняться, если функция $\varphi$ разрывна хотя бы в одной точке.
\end{example}

\begin{theorem}[Об интегрируемости на подотрезках]
    Если $f \in R[a; b]$ и $[c; d] \subset [a; b]$, то $f \in R[c; d]$.
\end{theorem}

\begin{proof}
    Из интегрируемости $f$ вытекает (теорема Дарбу) существование разбиения $T$ такого, что $\omega(f, T) < \varepsilon$. Добавим к набору точек, порождающих $T$, точки $c$ и $d$. Получим более мелкое разбиение $\widetilde{T}$ отрезка $[a; b]$ (для него $\omega(f, \widetilde{T}) < \omega(f, T) < \varepsilon$), содержащее в себе разбиение $\widetilde{T}^0$ отрезка $[c; d]$. Получаем
    \[
        \varepsilon > \omega(f, \widetilde{T}) = \sum_{\Delta \in \widetilde{T}^0}\br{\sup\limits_{\Delta}f - \inf\limits_{\Delta}}\abs{\Delta} + \sum_{\Delta \notin \widetilde{T}^0}\br{\sup\limits_{\Delta}f - \inf\limits_{\Delta}f}\abs{\Delta} \geqslant \sum_{\Delta \in \widetilde{T}^0}\br{\sup\limits_{\Delta}f - \inf\limits_{\Delta}}\abs{\Delta} = \omega(f, \widetilde{T}^0).
    \]
    Согласно теореме Дарбу, $f \in R[c; d]$.
\end{proof}

\begin{theorem}[Об аддитивности интеграла Римана]
    Допустим, $a < c < b$ и $f \in R[a; c] \cap R[c; b]$. Тогда $f \in R[a; b]$ и
    \[
        \int\limits_a^bf(x)dx = \int\limits_a^cf(x)dx + \int\limits_c^bf(x)dx.
    \]
\end{theorem}

Для доказательства этой теоремы нам понадобится лемма:

\begin{lemma}
    Если $f$ ограничена на отрезке $[a; b]$ и $a < c < b$, то
    \[
        (D)\lowint_a^b = (D)\lowint_a^cf + (D)\lowint_c^bf,\eqno(\ast)
    \]
    и аналогичное равенство справедливо для верхний интегралов Дарбу.
\end{lemma}

\begin{proof}
    Возьмём любое $\varepsilon > 0$. Определение нижнего интеграла Дарбу даёт существование разбиений $T^1$ отрезка $[a; c]$ и $T^2$ отрезка $[c; b]$ таких, что
    \[
        s(f, T^2) > (D)\lowint_a^cf - \varepsilon,\quad s(f, T^2) > (D)\lowint_c^bf - \varepsilon.
    \]
    Для разбиений $T = T^1 \sqcup T^2$ отрезка $[a; b]$ имеем:
    \begin{multline*}
        (D)\lowint_a^bf \geqslant s(f, T) = \sum_{\Delta_i \in T}\inf\limits_{\Delta_i}\cdot\abs{\Delta_i} = \sum_{\Delta_i \in T^1}\inf\limits_{\Delta_i}\cdot\abs{\Delta_i} + \sum_{\Delta_i \in T^2}\inf\limits_{\Delta_i}\cdot\abs{\Delta_i} =\\ = s(f, T^1) + s(f, T^2) > (D)\lowint_a^cf + (D)\lowint_c^bf - 2\varepsilon.
    \end{multline*}
    Т.\,к. $\varepsilon > 0$ произвольно, левая часть $(\ast)$ не меньше правой.

    Снова зададимся произвольным $\varepsilon > 0$ и найдём разбиение $T$ отрезка $[a; b]$ такое, что
    \[
        s(f, T) > (D)\lowint_a^bf - \varepsilon.
    \]
    Если в набор точек, порождающих $T$, не входила точка $c$, добавим её и получим новое, более мелкое разбиение (оставим ему старое название $T$), для которого тем более верно последнее неравенство (при измельчении разбиения нижние суммы Дарбу могут только возрасти). Разбиение $T$ есть $T^1 \sqcup T^2$, где $T^1$ --- разбиение отрезка $[a; c]$, а $T^2$ --- разбиение отрезка $[c; b]$. Имеем:
    \[
        (D)\lowint_a^bf < s(f, T) + \varepsilon = s(f, T^1) + s(f, T^2) + \varepsilon \leqslant (D)\lowint_a^cf + (D)\lowint_c^bf + \varepsilon.
    \]
    Т.\,к. $\varepsilon > 0$ произвольно, левая часть $(\ast)$ не больше правой.

    Таким образом, имеет место равенство $(\ast)$, а его аналог для верхних интегралов Дарбу доказывается аналогично.
\end{proof}

А теперь докажем теорему об аддитивности интеграла:

\begin{proof}
    Из интегрируемости вытекает ограниченность $f$ и на $[a; c]$, и на $[c; b]$, значит, и на $[a; b]$ тоже. Далее,
    \[
        (D)\lowint_a^b = (D)\lowint_a^cf + (D)\lowint_c^bf \overset{\text{критерий Дарбу}}{=\joinrel=} (D)\upint_a^cf + (D)\upint_c^bf = (D)\int\limits_a^bf.
    \]
    Согласно, критерию Дарбу, $f \in R[a; b]$ и каждый верхний или нижний интеграл Дарбу в последнем выражении можно заменить на интеграл Римана.
\end{proof}

\begin{remark}
    До сих пор предполагалось, что верхний предел интегрирования больше нижнего. Ситуацию можно расширить, положив по определению
    \[
        \int\limits_b^af(x)dx \vcentcolon = -\int\limits_a^bf(x)dx.
    \]
    Можно показать, что последняя теорема верна для всех $a$, $b$ и $c$ с учётом дополненного нами определения.
\end{remark}

